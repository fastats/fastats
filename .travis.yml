language: python
sudo: false
os:
  - linux
dist: xenial
python:
  - 3.6
  - 3.7
  - 3.8
  - 3.9
env:
  - NUMPY=1.15 NUMBA=0.48
  - NUMPY=1.15 NUMBA=0.49
  - NUMPY=1.15 NUMBA=0.50
  - NUMPY=1.16 NUMBA=0.48
  - NUMPY=1.16 NUMBA=0.49
  - NUMPY=1.16 NUMBA=0.50
  - NUMPY=1.18 NUMBA=0.52
matrix:
  exclude:
    - python: 3.6
      env: NUMPY=1.18 NUMBA=0.52
install:
  - pip install -e .[ci_test,doc]
  - pip install numpy==$NUMPY
  - pip install numba==$NUMBA
script:
  - pytest
  - sphinx-build docs/source docs/build #-W
after_success:
    - codecov
